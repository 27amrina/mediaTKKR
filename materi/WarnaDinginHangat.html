<!doctype html>
<html lang="id">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Apersepsi • Materi</title>

    <!-- Bootstrap & Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <link href="../css/style.css" rel="stylesheet">

    <style>
        :root {
            --navbar-h: 55px;
            --footer-h: 40px;
            --brand: #ff3f8e;
            --sidebar-w: 255px;
            --line: #e5e7eb;
            --card: #ffffff;
            --card-border: #eeeeee;
            --sidebar-gap: 1px;
        }

        html,
        body {
            height: 100%;
        }

        body {
            padding-bottom: var(--footer-h);
            background: #fff;
        }

        .main-pad {
            padding-top: var(--navbar-h);
        }

        main.app-shell {
            height: calc(100vh - var(--navbar-h) - var(--footer-h));
            overflow: hidden;
        }

        .navbar,
        .footer {
            background: #fff;
        }

        .footer {
            border-top: 1px solid #eee;
        }

        .no-top-gap>[class^="col-"],
        .no-top-gap>aside,
        .no-top-gap>section {
            padding-top: 0 !important;
        }

        .menu-card {
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, .04);
        }

        .menu-title {
            padding: .75rem 1rem;
            border-bottom: 1px solid #eee;
            font-weight: 600;
        }

        .menu-item {
            display: block;
            padding: .6rem 1rem;
            color: inherit;
            text-decoration: none;
        }

        .menu-item:hover {
            background: #fafafa;
        }

        .menu-item.active {
            background: #f5f5f5;
            font-weight: 600;
        }

        @media (min-width:768px) {
            .sidebar-fixed {
                position: fixed;
                top: var(--navbar-h);
                left: 0;
                width: var(--sidebar-w);
                height: calc(100vh - var(--navbar-h));
                overflow-y: auto;
            }

            .content-with-fixed {
                margin-left: calc(var(--sidebar-w) + var(--sidebar-gap));
            }
        }

        .btn-brand {
            background: var(--brand);
            color: #fff;
        }

        .btn-brand:hover {
            color: #fff;
            filter: brightness(.95);
        }

        .content-col {
            height: 100%;
            overflow: hidden;
        }

        .content-scroll {
            height: 100%;
            overflow: hidden;
        }

        .materi-card .card-header {
            flex: 0 0 auto;
            background: #fff;
            border-bottom: 1px solid #eee;
            padding: .5rem 1rem .4rem !important;
        }

        .sticky-cta .content-with-fixed .d-flex {
            justify-content: center;
            align-items: center;
            gap: .5rem;
            flex-wrap: wrap;
            width: 100%;
        }

        @media (max-width: 767.98px) {

            body {
                padding-bottom: 0;
            }

            main.app-shell {
                height: auto;
                overflow: visible;
            }

            .content-col,
            .content-scroll {
                height: auto;
                overflow: visible;
            }

            .materi-card {
                height: auto;
            }

            .materi-card .card-body.scrollable {
                min-height: 0;
                max-height: none;
                overflow: visible;
            }

            .sidebar-fixed {
                position: static;
                width: 100%;
                height: auto;
                overflow: visible;
            }

            .sticky-cta {
                position: static;
                margin-top: .75rem;
            }

            .footer {
                position: static !important;
            }
        }

        @media (min-width: 768px) {
            main.app-shell {
                height: calc(100dvh - var(--navbar-h) - var(--footer-h));
                overflow: hidden;
            }

            .sidebar-fixed {
                position: fixed;
                top: var(--navbar-h);
                left: 0;
                width: var(--sidebar-w);
                height: calc(100dvh - var(--navbar-h));
                overflow-y: auto;
            }

            .content-with-fixed {
                margin-left: calc(var(--sidebar-w) + var(--sidebar-gap));
            }

            .content-col,
            .content-scroll {
                height: 100%;
                overflow: hidden;
            }

            .materi-card {
                height: clamp(480px, 66vh, 760px);
            }

            .materi-card .card-body.scrollable {
                flex: 1 1 auto;
                min-height: 0;
                overflow: auto;
                -webkit-overflow-scrolling: touch;
            }

            .sticky-cta {
                position: fixed;
                bottom: calc(var(--footer-h) + 8px);
                left: calc(var(--sidebar-w) + var(--sidebar-gap));
                right: 12px;
                z-index: 1030;
            }
        }

        @media (min-width: 1200px) {
            .materi-card {
                height: clamp(570px, 62vh, 820px);
            }
        }

        .warmcool-wheel-wrapper {
            max-width: 260px;
        }

        .wc-slice {
            cursor: pointer;
            stroke: #ffffff;
            stroke-width: 2;
            transition: transform .15s ease, stroke-width .15s ease;
            transform-origin: 50% 50%;
        }

        .wc-slice:hover {
            transform: scale(1.03);
            stroke-width: 3;
        }

        .wc-slice.active {
            stroke: #111827;
            stroke-width: 4;
            transform: scale(1.05);
        }

        .wc-label {
            font-size: 9px;
            font-family: system-ui, -apple-system, "Segoe UI", sans-serif;
            fill: #111827;
            pointer-events: none;
        }

        .small-muted {
            font-size: .8rem;
            color: #6b7280;
        }

        .corrective-colored .click-row {
            cursor: pointer;
            transition: transform .12s ease, box-shadow .12s ease;
        }

        .corrective-colored .click-row:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 10px rgba(15, 23, 42, .15);
        }

        .corrective-colored .click-row.selected-row {
            outline: 2px solid #111827;
            outline-offset: -2px;
        }

        .corrective-colored td {
            font-weight: 500;
            border-radius: 6px;
        }

        /* Undertone */
        .u-lightest-yellow {
            background: #fff9c4;
        }

        .u-light-yellow {
            background: #fff59d;
        }

        .u-yellow {
            background: #fff176;
        }

        .u-yellow-orange {
            background: #ffcc80;
        }

        .u-orange {
            background: #ffb74d;
        }

        .u-orange-red {
            background: #ffab91;
        }

        .u-red-orange {
            background: #ff7043;
            color: #0f172a;
        }

        .u-red {
            background: #ef5350;
            color: #f9fafb;
        }

        .u-dark-red {
            background: #c62828;
            color: #f9fafb;
        }

        .u-darkest-red {
            background: #8b0000;
            color: #f9fafb;
        }

        /* Corrective tone */
        .c-lightest-violet {
            background: #e1bee7;
        }

        .c-light-violet {
            background: #ce93d8;
        }

        .c-violet {
            background: #ab47bc;
            color: #f9fafb;
        }

        .c-violet-blue {
            background: #5c6bc0;
            color: #f9fafb;
        }

        .c-blue {
            background: #42a5f5;
            color: #0f172a;
        }

        .c-blue-green {
            background: #26a69a;
            color: #0f172a;
        }

        .c-green-blue {
            background: #26c6da;
            color: #0f172a;
        }

        .c-green {
            background: #66bb6a;
            color: #0f172a;
        }

        .c-dark-green {
            background: #2e7d32;
            color: #f9fafb;
        }

        .c-darkest-green {
            background: #1b5e20;
            color: #f9fafb;
        }

        /* Level */
        .lvl-10 {
            background: #f5f5f5;
        }

        .lvl-9 {
            background: #eeeeee;
        }

        .lvl-8 {
            background: #e0e0e0;
        }

        .lvl-7 {
            background: #bdbdbd;
        }

        .lvl-6 {
            background: #9e9e9e;
            color: #f9fafb;
        }

        .lvl-5 {
            background: #757575;
            color: #f9fafb;
        }

        .lvl-4 {
            background: #616161;
            color: #f9fafb;
        }

        .lvl-3 {
            background: #424242;
            color: #f9fafb;
        }

        .lvl-2 {
            background: #303030;
            color: #f9fafb;
        }

        .lvl-1 {
            background: #000000;
            color: #f9fafb;
        }
    </style>
</head>

<body>
    <!-- NAVBAR -->
    <nav class="navbar navbar-light navbar-expand-lg fixed-top shadow-sm">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center gap-2" href="../index.html">
                <i class="bi bi-brush" style="font-size:1.25rem; color:var(--brand)"></i>
                <strong>Pewarnaan Rambut</strong> <span class="fw-normal">• Single Application</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navs">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navs">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="../index.html">Beranda</a></li>
                    <li class="nav-item"><a class="nav-link active fw-semibold" style="color:var(--brand)"
                            aria-current="page" href="./apersepsi.html">Materi</a></li>
                    <li class="nav-item"><a class="nav-link" href="../latihan.html">Latihan</a></li>
                    <li class="nav-item"><a class="nav-link" href="../kd.html">Tujuan Pembelajaran</a></li>
                    <li class="nav-item"><a class="nav-link" href="../peta.html">Peta Konsep</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- KONTEN -->
    <main class="main-pad app-shell">
        <div class="container-fluid ">
            <div class="row g-1 no-top-gap h-100">
                <!-- SIDEBAR -->
                <aside class="col-12 col-md-auto order-1 order-md-0 p-0">
                    <nav class="menu-card sidebar-fixed shadow-sm">
                        <div class="menu-title"><i class="bi bi-journal-bookmark"></i> Materi</div>

                        <a class="menu-item" href="PengetahuanDasarRambut.html">
                            <i class="bi bi-lightbulb"></i> Pengetahuan Dasar Rambut
                        </a>

                        <!-- A. Pewarnaan Rambut -->
                        <button class="d-flex align-items-center w-100 border-0 bg-transparent" type="button"
                            data-bs-toggle="collapse" data-bs-target="#submenu-teori" aria-expanded="true"
                            aria-controls="submenu-teori">
                            <span class="me-2"><i class="bi bi-droplet-half"></i></span>
                            <span class="flex-grow-1 text-start">A. Pewarnaan Rambut</span>
                            <i class="bi bi-chevron-down small"></i>
                        </button>

                        <div class="collapse show" id="submenu-teori">
                            <ul class="nav flex-column ps-4 my-1">
                                <li><a class="menu-item py-1" href="Sejarah.html">1. Sejarah</a></li>
                                <li><a class="menu-item py-1" href="PengertianPewarnaan.html">2. Pengertian
                                        Pewarnaan</a></li>
                                <li><a class="menu-item py-1" href="TujuanPewarnaan.html">3. Tujuan Pewarnaan</a></li>
                                <li><a class="menu-item py-1" href="TipePewarnaan.html">4. Tipe Pewarnaan</a></li>
                                <li><a class="menu-item py-1" href="Desainteknik.html">5. Istilah Desain dan Teknik
                                        Pewarnaan</a></li>
                                <li><a class="menu-item py-1" href="AyoLakukanA.html">6. Ayo Lakukan Pewarnaan</a></li>
                            </ul>
                        </div>

                        <!-- B. Teori Warna -->
                        <div class="menu-item active">
                            <button class="menu-item d-flex align-items-center w-100 border-0 bg-transparent"
                                type="button" data-bs-toggle="collapse" data-bs-target="#submenu-peralatan"
                                aria-expanded="true" aria-controls="submenu-peralatan">
                                <span class="me-2"><i class="bi bi-palette"></i></span>
                                <span class="flex-grow-1 text-start">B. Teori Warna</span>
                                <i class="bi bi-chevron-down small"></i>
                            </button>
                        </div>
                        <div class="collapse show" id="submenu-peralatan">
                            <ul class="nav flex-column ps-4 my-1">
                                <li><a class="menu-item py-1" href="PengetahuanWarna.html">1. Pengetahuan Warna</a>
                                </li>
                                <li><a class="menu-item py-1" href="KegunaanSegitiga.html">2. Kegunaan Segitiga</a>
                                </li>
                                <li><a class="menu-item py-1" href="KoreksiWarna.html">3. Koreksi Warna</a></li>
                                <li><a class="menu-item py-1" href="PengaruhModifikasi.html">4. Pengaruh Modifikasi</a>
                                </li>
                                <li><a class="menu-item py-1 active" href="WarnaDinginHangat.html">5. Warna Dingin dan
                                        Hangat</a></li>
                                <li><a class="menu-item py-1" href="AyoLakukanB.html">6. Ayo Lakukan Pewarnaan</a></li>
                            </ul>
                        </div>

                        <!-- C. Pewarnaan Korektif -->
                        <button class="menu-item d-flex align-items-center w-100 border-0 bg-transparent" type="button"
                            data-bs-toggle="collapse" data-bs-target="#submenu-Pewarnaan" aria-expanded="true"
                            aria-controls="submenu-Pewarnaan">
                            <span class="me-2"><i class="bi bi-magic"></i></span>
                            <span class="flex-grow-1 text-start">C. Pewarnaan Korektif</span>
                            <i class="bi bi-chevron-down small"></i>
                        </button>

                        <div class="collapse show" id="submenu-Pewarnaan">
                            <ul class="nav flex-column ps-4 my-1">
                                <li><a class="menu-item py-1" href="PewarnaanKorektif.html">1. Pewarnaan Korektif</a>
                                </li>
                                <li><a class="menu-item py-1" href="KesalahanDalamPewarnaan.html">2. Kesalahan Dalam
                                        Pewarnaan</a></li>
                                <li><a class="menu-item py-1" href="AyoLakukanC.html">3. Ayo Lakukan Pewarnaan</a></li>
                            </ul>
                        </div>

                    </nav>
                </aside>

                <!-- KONTEN KANAN -->
                <section class="col-12 col-md-9 col-xl-10 content-col content-with-fixed order-2 order-md-0">
                    <div class="content-scroll">
                        <div class="card shadow-sm materi-card">
                            <div class="card-header d-flex align-items-center gap-2">
                                <i class="bi bi-lightbulb" style="color:var(--brand); font-size:1.25rem;"></i>
                                <div class="d-flex flex-wrap align-items-baseline gap-2">
                                    <h3 class="h5 mb-0 fw-bold">Pengetahuan Dasar Pewarnaan Rambut</h3>
                                </div>
                            </div>

                            <div class="card-body scrollable flex-grow-1 min-vh-0">

                                <!-- ========== MATERI: WARNA DINGIN & HANGAT + CORRECTIVE CHART ========== -->
                                <section class="mt-3" id="materi-warm-cool">
                                    <!-- A. Mengenal Warna Dingin dan Hangat -->
                                    <div class="card shadow-sm mb-4">
                                        <div class="card-body">
                                            <h5 class="fw-bold mb-2">5. Mengenal Warna Dingin dan Hangat</h5>

                                            <!-- Tabs teks penjelasan -->
                                            <ul class="nav nav-pills mb-3" id="tabWarmCool" role="tablist">
                                                <li class="nav-item" role="presentation">
                                                    <button class="nav-link active" id="tab-umum-tab"
                                                        data-bs-toggle="pill" data-bs-target="#tab-umum" type="button"
                                                        role="tab">
                                                        Ringkasan Umum
                                                    </button>
                                                </li>
                                                <li class="nav-item" role="presentation">
                                                    <button class="nav-link" id="tab-dingin-tab" data-bs-toggle="pill"
                                                        data-bs-target="#tab-dingin" type="button" role="tab">
                                                        Warna Dingin (Cold)
                                                    </button>
                                                </li>
                                                <li class="nav-item" role="presentation">
                                                    <button class="nav-link" id="tab-hangat-tab" data-bs-toggle="pill"
                                                        data-bs-target="#tab-hangat" type="button" role="tab">
                                                        Warna Hangat (Warm)
                                                    </button>
                                                </li>
                                            </ul>

                                            <div class="tab-content small">
                                                <div class="tab-pane fade show active" id="tab-umum" role="tabpanel">
                                                    <p>
                                                        Warna dapat dipahami sebagai bagian dari spektrum cahaya.
                                                        Dalam desain dan pewarnaan rambut, warna sering dikelompokkan
                                                        menjadi
                                                        <strong>warna dingin (cold)</strong> dan <strong>warna hangat
                                                            (warm)</strong>.
                                                        Keduanya memengaruhi kesan yang muncul: sejuk–tenang atau
                                                        hangat–bersemangat.
                                                    </p>
                                                    <p class="mb-0">
                                                        Di bawah ini ada <strong>lingkaran warna dingin &amp;
                                                            hangat</strong>
                                                        yang bisa diklik
                                                        untuk melihat contoh warna dan penggunaannya pada pewarnaan
                                                        rambut.
                                                    </p>
                                                </div>
                                                <div class="tab-pane fade" id="tab-dingin" role="tabpanel">
                                                    <p>
                                                        <strong>Warna dingin</strong> memberi kesan sejuk, tenang, dan
                                                        profesional.
                                                        Contohnya: biru, ungu, hijau toska, abu-abu.
                                                    </p>
                                                    <ul>
                                                        <li>Sering diasosiasikan dengan air, es, langit, atau logam.
                                                        </li>
                                                        <li>Pada rambut, digunakan untuk menciptakan warna
                                                            <em>ash</em>, keabu-abuan,
                                                            atau menetralkan rona kuning–oranye yang terlalu hangat.
                                                        </li>
                                                        <li>Memberi kesan modern, elegan, dan “bersih”.</li>
                                                    </ul>
                                                </div>
                                                <div class="tab-pane fade" id="tab-hangat" role="tabpanel">
                                                    <p>
                                                        <strong>Warna hangat</strong> memberikan kesan akrab, ceria, dan
                                                        energik.
                                                        Contohnya: merah, oranye, kuning, cokelat keemasan.
                                                    </p>
                                                    <ul>
                                                        <li>Sering dikaitkan dengan matahari, api, dan dedaunan musim
                                                            gugur.</li>
                                                        <li>Pada rambut, menghasilkan warna keemasan, tembaga, hingga
                                                            merah intens.</li>
                                                        <li>Cocok untuk menciptakan tampilan yang ramah, berani, dan
                                                            menarik perhatian.</li>
                                                    </ul>
                                                </div>
                                            </div>

                                            <!-- Lingkaran Warm–Cold interaktif -->
                                            <div class="row g-3 align-items-center mt-3">
                                                <div class="col-md-5">
                                                    <div class="warmcool-wheel-wrapper mx-auto">
                                                        <svg id="wheelWarmCool" viewBox="0 0 260 260"></svg>
                                                    </div>
                                                    <p class="text-center small text-muted mt-1 mb-0">
                                                        Klik bagian <strong>WARM</strong> atau <strong>COLD</strong>,
                                                        atau salah satu sektor kecil untuk melihat contoh warna rambut.
                                                    </p>
                                                </div>
                                                <div class="col-md-7">
                                                    <h6 class="text-uppercase small-muted mb-1">Info Warna Terpilih</h6>
                                                    <div id="warmCoolInfo" class="border rounded-3 p-2 bg-light small">
                                                        Belum ada warna yang dipilih. Klik lingkaran di sebelah kiri.
                                                    </div>

                                                    <hr class="my-2">

                                                    <!-- Latihan 1 -->
                                                    <h6 class="text-uppercase small-muted mb-1">Latihan Cepat</h6>
                                                    <p class="small mb-1">
                                                        Seorang klien ingin tampilan <em>cool ash blonde</em> yang
                                                        terkesan elegan dan profesional. Warna dominan yang digunakan
                                                        sebaiknya…
                                                    </p>
                                                    <div class="d-flex flex-wrap gap-2 mb-2">
                                                        <button class="btn btn-sm btn-outline-secondary btn-q-warmcool"
                                                            data-answer="cold">Warna Dingin</button>
                                                        <button class="btn btn-sm btn-outline-secondary btn-q-warmcool"
                                                            data-answer="warm">Warna Hangat</button>
                                                        <button id="btnResetWarmCool"
                                                            class="btn btn-sm btn-outline-secondary ms-auto">
                                                            Reset Latihan
                                                        </button>
                                                    </div>
                                                    <div id="feedbackWarmCool" class="small mb-2"></div>

                                                    <!-- Latihan tambahan: ceklis warna dingin -->
                                                    <div class="border rounded-3 p-2">
                                                        <div class="small fw-semibold mb-1">
                                                            Latihan Tambahan: Pilih Semua Warna Dingin
                                                        </div>
                                                        <p class="small mb-1">
                                                            Centang semua warna yang termasuk <strong>dingin
                                                                (cold)</strong>, lalu klik <em>Periksa Jawaban</em>.
                                                        </p>
                                                        <div class="d-flex flex-wrap gap-2 small"
                                                            id="warmCoolChecklist">
                                                            <label class="me-2"><input type="checkbox" value="Blue">
                                                                Blue</label>
                                                            <label class="me-2"><input type="checkbox" value="Violet">
                                                                Violet</label>
                                                            <label class="me-2"><input type="checkbox" value="Green">
                                                                Green</label>
                                                            <label class="me-2"><input type="checkbox" value="Yellow">
                                                                Yellow</label>
                                                            <label class="me-2"><input type="checkbox" value="Orange">
                                                                Orange</label>
                                                            <label class="me-2"><input type="checkbox" value="Red">
                                                                Red</label>
                                                        </div>
                                                        <div class="mt-2 d-flex gap-2">
                                                            <button id="btnCheckCold"
                                                                class="btn btn-sm btn-brand">Periksa Jawaban</button>
                                                            <button id="btnResetCold"
                                                                class="btn btn-sm btn-outline-secondary">Reset</button>
                                                        </div>
                                                        <div id="fbColdChecklist" class="small mt-1"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- B. Corrective Coloration Chart -->
                                    <div class="card shadow-sm mb-4">
                                        <div class="card-body">
                                            <h5 class="fw-bold mb-2">Corrective Coloration Chart (Tabel Koreksi
                                                Warna)</h5>
                                            <p class="small">
                                                Tabel di bawah membantu menentukan <strong>warna korektor</strong>
                                                (corrective tone)
                                                berdasarkan <strong>undertone</strong> yang muncul pada rambut dan
                                                <strong>level kedalaman warna</strong>. Klik salah satu baris lalu
                                                jawab tantangan kecil di sisi kanan.
                                            </p>

                                            <div class="row g-3">
                                                <!-- Tabel berwarna -->
                                                <div class="col-lg-7">
                                                    <div class="table-responsive small">
                                                        <table
                                                            class="table table-sm align-middle corrective-colored text-center"
                                                            id="tblCorrective">
                                                            <thead class="table-light">
                                                                <tr>
                                                                    <th>Undertone</th>
                                                                    <th>Corrective Tone</th>
                                                                    <th>Level</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                <tr class="click-row" data-under="Lightest Yellow"
                                                                    data-correct="Lightest Violet"
                                                                    data-level="10 / Lightest Blonde">
                                                                    <td class="u-lightest-yellow">Lightest Yellow</td>
                                                                    <td class="c-lightest-violet">Lightest Violet</td>
                                                                    <td class="lvl-10">10 / Lightest Blonde</td>
                                                                </tr>
                                                                <tr class="click-row" data-under="Light Yellow"
                                                                    data-correct="Light Violet"
                                                                    data-level="9 / Very Light Blonde">
                                                                    <td class="u-light-yellow">Light Yellow</td>
                                                                    <td class="c-light-violet">Light Violet</td>
                                                                    <td class="lvl-9">9 / Very Light Blonde</td>
                                                                </tr>
                                                                <tr class="click-row" data-under="Yellow"
                                                                    data-correct="Violet" data-level="8 / Light Blonde">
                                                                    <td class="u-yellow">Yellow</td>
                                                                    <td class="c-violet">Violet</td>
                                                                    <td class="lvl-8">8 / Light Blonde</td>
                                                                </tr>
                                                                <tr class="click-row" data-under="Yellow Orange"
                                                                    data-correct="Violet Blue"
                                                                    data-level="7 / Medium Blonde">
                                                                    <td class="u-yellow-orange">Yellow Orange</td>
                                                                    <td class="c-violet-blue">Violet Blue</td>
                                                                    <td class="lvl-7">7 / Medium Blonde</td>
                                                                </tr>
                                                                <tr class="click-row" data-under="Orange"
                                                                    data-correct="Blue" data-level="6 / Dark Blonde">
                                                                    <td class="u-orange">Orange</td>
                                                                    <td class="c-blue">Blue</td>
                                                                    <td class="lvl-6">6 / Dark Blonde</td>
                                                                </tr>
                                                                <tr class="click-row" data-under="Orange Red"
                                                                    data-correct="Blue Green"
                                                                    data-level="5 / Light Brown">
                                                                    <td class="u-orange-red">Orange Red</td>
                                                                    <td class="c-blue-green">Blue Green</td>
                                                                    <td class="lvl-5">5 / Light Brown</td>
                                                                </tr>
                                                                <tr class="click-row" data-under="Red Orange"
                                                                    data-correct="Green Blue"
                                                                    data-level="4 / Medium Brown">
                                                                    <td class="u-red-orange">Red Orange</td>
                                                                    <td class="c-green-blue">Green Blue</td>
                                                                    <td class="lvl-4">4 / Medium Brown</td>
                                                                </tr>
                                                                <tr class="click-row" data-under="Red"
                                                                    data-correct="Green" data-level="3 / Dark Brown">
                                                                    <td class="u-red">Red</td>
                                                                    <td class="c-green">Green</td>
                                                                    <td class="lvl-3">3 / Dark Brown</td>
                                                                </tr>
                                                                <tr class="click-row" data-under="Dark Red"
                                                                    data-correct="Dark Green"
                                                                    data-level="2 / Darkest Brown">
                                                                    <td class="u-dark-red">Dark Red</td>
                                                                    <td class="c-dark-green">Dark Green</td>
                                                                    <td class="lvl-2">2 / Darkest Brown</td>
                                                                </tr>
                                                                <tr class="click-row" data-under="Darkest Red"
                                                                    data-correct="Darkest Green" data-level="1 / Black">
                                                                    <td class="u-darkest-red">Darkest Red</td>
                                                                    <td class="c-darkest-green">Darkest Green</td>
                                                                    <td class="lvl-1">1 / Black</td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                    <p class="small-muted mb-0">
                                                        Gambar 1.13 Corrective Color Chart — warna sel disesuaikan
                                                        dengan
                                                        nama warnanya agar lebih mudah dipahami.
                                                    </p>
                                                </div>

                                                <!-- Panel info + tantangan -->
                                                <div class="col-lg-5 small">
                                                    <div id="ccInfo" class="border rounded-3 p-2 bg-light mb-2">
                                                        Klik salah satu baris tabel untuk melihat penjelasan koreksi
                                                        warnanya.
                                                    </div>

                                                    <!-- Tantangan 1 -->
                                                    <div class="border rounded-3 p-2 mb-2">
                                                        <div class="small fw-semibold mb-1">
                                                            Tantangan Mini 1: Pasangkan Undertone &amp; Corrective Tone
                                                        </div>
                                                        <div class="row g-1 align-items-center mb-2">
                                                            <div class="col-6">
                                                                <label class="small mb-1">Undertone (soal)</label>
                                                                <select id="quizUnder"
                                                                    class="form-select form-select-sm">
                                                                    <option value="">Pilih…</option>
                                                                    <option value="Light Yellow">Light Yellow</option>
                                                                    <option value="Yellow">Yellow</option>
                                                                    <option value="Orange">Orange</option>
                                                                    <option value="Red">Red</option>
                                                                    <option value="Dark Red">Dark Red</option>
                                                                </select>
                                                            </div>
                                                            <div class="col-6">
                                                                <label class="small mb-1">Corrective tone
                                                                    (jawaban)</label>
                                                                <select id="quizCorrect"
                                                                    class="form-select form-select-sm">
                                                                    <option value="">Pilih…</option>
                                                                    <option value="Light Violet">Light Violet</option>
                                                                    <option value="Violet">Violet</option>
                                                                    <option value="Blue">Blue</option>
                                                                    <option value="Green">Green</option>
                                                                    <option value="Dark Green">Dark Green</option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                        <div class="d-flex gap-2 mb-1">
                                                            <button id="btnCheckChart"
                                                                class="btn btn-sm btn-brand">Periksa</button>
                                                            <button id="btnResetChart"
                                                                class="btn btn-sm btn-outline-secondary">Reset</button>
                                                        </div>
                                                        <div id="fbChart" class="small mb-2"></div>

                                                        <!-- Tantangan 2 -->
                                                        <div class="border-top pt-2 mt-1">
                                                            <div class="small fw-semibold mb-1">
                                                                Tantangan Mini 2: Pilih Baris Sesuai Kasus
                                                            </div>
                                                            <p class="small mb-1" id="caseText">
                                                                Klik <em>Kasus Baru</em>, kemudian pilih satu baris pada
                                                                tabel sebagai jawabanmu.
                                                            </p>
                                                            <div class="d-flex gap-2 mb-2">
                                                                <button id="btnNewCase"
                                                                    class="btn btn-sm btn-outline-primary">
                                                                    Kasus Baru
                                                                </button>
                                                                <button id="btnResetCase"
                                                                    class="btn btn-sm btn-outline-secondary">
                                                                    Reset Kasus
                                                                </button>
                                                            </div>

                                                            <!-- Kolom jawaban otomatis -->
                                                            <div class="row g-1 mb-2 small">
                                                                <div class="col-6">
                                                                    <label class="small mb-0">Undertone yang kamu
                                                                        pilih</label>
                                                                    <input id="caseAnswerUnder" type="text"
                                                                        class="form-control form-control-sm" readonly
                                                                        placeholder="Belum ada">
                                                                </div>
                                                                <div class="col-6">
                                                                    <label class="small mb-0">Level yang kamu
                                                                        pilih</label>
                                                                    <input id="caseAnswerLevel" type="text"
                                                                        class="form-control form-control-sm" readonly
                                                                        placeholder="Belum ada">
                                                                </div>
                                                            </div>

                                                            <div class="small-muted mb-1">
                                                                Setelah kasus muncul, klik baris yang menurutmu paling
                                                                tepat. Kolom
                                                                jawaban di atas akan terisi otomatis.
                                                            </div>
                                                            <div id="fbCaseRow" class="small"></div>
                                                        </div>

                                                    </div>

                                                    <!-- Reset semua interaktif -->
                                                    <button id="btnResetAllChart"
                                                        class="btn btn-sm btn-outline-secondary w-100">
                                                        Reset Semua Interaktif Tabel
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </section>

                            </div>
                        </div>
                    </div>
                </section>

            </div>
        </div>

    </main>

    <!-- CTA -->
    <div class="sticky-cta">
        <div class="container">
            <div class="col-12 col-md-10 content-col content-with-fixed mx-auto">
                <div class="d-flex justify-content-center align-items-center flex-wrap gap-2 w-100">
                    <a class="btn btn-outline-secondary" href="PengaruhModifikasi.html"><i class="bi bi-arrow-left"></i>
                        Sebelumnya</a>
                    <a class="btn btn-brand" href="AyoLakukanB.html">Berikutnya <i class="bi bi-arrow-right"></i></a>
                </div>
            </div>
        </div>
    </div>

    <!-- FOOTER -->
    <footer class="footer fixed-bottom py-2">
        <div class="container d-flex justify-content-between align-items-center small">
            <span>SMKS ISFI BANJARMASIN • Hair Coloring</span>
            <span class="text-muted">© 2025 • Single Application</span>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        (function () {
            const $ = (s, r = document) => r.querySelector(s);
            const $$ = (s, r = document) => Array.from(r.querySelectorAll(s));

            /* ==================== LOCAL STORAGE SETUP ==================== */
            const STORAGE_KEY = 'hairColoringWarmCoolCorrective_v1';

            const defaultState = {
                // wheel warm–cool
                warmCoolSelectedId: null,
                warmCoolInfoHTML: '',
                warmCoolQuizFeedback: '',
                warmCoolChecklist: [],
                fbColdHTML: '',

                // corrective chart
                correctiveSelectedUnder: null,
                ccInfoHTML: '',
                quizUnder: '',
                quizCorrect: '',
                fbChartHTML: '',

                // kasus
                currentCaseIndex: null,
                caseTextHTML: '',
                caseAnswerUnder: '',
                caseAnswerLevel: '',
                fbCaseRowHTML: ''
            };

            let appState = { ...defaultState };

            function saveState() {
                try {
                    localStorage.setItem(STORAGE_KEY, JSON.stringify(appState));
                } catch (e) {
                    // kalau mode private / storage disabled, abaikan saja
                }
            }

            function loadStateFromStorage() {
                try {
                    const raw = localStorage.getItem(STORAGE_KEY);
                    if (raw) {
                        const parsed = JSON.parse(raw);
                        appState = { ...defaultState, ...parsed };
                    }
                } catch (e) {
                    appState = { ...defaultState };
                }
            }

            /* ==================== DATA WHEEL ==================== */
            const warmCoolData = [
                { id: 'cool-blue', label: 'Blue', type: 'cold', fill: '#4f83ff', desc: 'Memberi kesan sangat dingin; dipakai untuk ash blonde atau menetralkan oranye.' },
                { id: 'cool-violet', label: 'Violet', type: 'cold', fill: '#9f7aea', desc: 'Menetralkan kuning; sering dipakai pada toning rambut pirang.' },
                { id: 'cool-green', label: 'Green', type: 'cold', fill: '#38b2ac', desc: 'Dipakai sebagai korektor merah atau efek fashion warna hijau.' },
                { id: 'warm-yellow', label: 'Yellow', type: 'warm', fill: '#facc15', desc: 'Menciptakan kesan pirang keemasan yang cerah dan hangat.' },
                { id: 'warm-orange', label: 'Orange', type: 'warm', fill: '#fb923c', desc: 'Memberi efek copper/tembaga pada rambut pirang–cokelat.' },
                { id: 'warm-red', label: 'Red', type: 'warm', fill: '#f97373', desc: 'Rona merah intens untuk tampilan berani dan ekspresif.' },
            ];

            const svg = $('#wheelWarmCool');
            const warmInfo = $('#warmCoolInfo');
            const defaultWarmInfo = 'Belum ada warna yang dipilih. Klik lingkaran di sebelah kiri.';
            const fbWC = $('#feedbackWarmCool');

            /* ==================== BANGUN WHEEL ==================== */
            if (svg) {
                const cx = 130, cy = 130, rOuter = 120, rInner = 50;
                const sliceAngle = (Math.PI * 2) / warmCoolData.length;
                const labelRadius = (rOuter + rInner) / 2;

                warmCoolData.forEach((d, i) => {
                    const start = -Math.PI / 2 + i * sliceAngle;
                    const end = start + sliceAngle;

                    const x1o = cx + rOuter * Math.cos(start);
                    const y1o = cy + rOuter * Math.sin(start);
                    const x2o = cx + rOuter * Math.cos(end);
                    const y2o = cy + rOuter * Math.sin(end);

                    const x1i = cx + rInner * Math.cos(end);
                    const y1i = cy + rInner * Math.sin(end);
                    const x2i = cx + rInner * Math.cos(start);
                    const y2i = cy + rInner * Math.sin(start);

                    const largeArc = sliceAngle > Math.PI ? 1 : 0;

                    const pathData = [
                        `M ${x1i} ${y1i}`,
                        `A ${rInner} ${rInner} 0 ${largeArc} 0 ${x2i} ${y2i}`,
                        `L ${x1o} ${y1o}`,
                        `A ${rOuter} ${rOuter} 0 ${largeArc} 1 ${x2o} ${y2o}`,
                        'Z'
                    ].join(' ');

                    const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                    path.setAttribute('d', pathData);
                    path.setAttribute('fill', d.fill);
                    path.classList.add('wc-slice');
                    path.dataset.id = d.id;
                    path.dataset.type = d.type;
                    svg.appendChild(path);

                    const mid = start + sliceAngle / 2;
                    const lx = cx + labelRadius * Math.cos(mid);
                    const ly = cy + labelRadius * Math.sin(mid);
                    const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                    text.setAttribute('x', lx);
                    text.setAttribute('y', ly);
                    text.setAttribute('text-anchor', 'middle');
                    text.setAttribute('dominant-baseline', 'middle');
                    text.classList.add('wc-label');
                    text.textContent = d.label;
                    svg.appendChild(text);
                });

                const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                line.setAttribute('x1', cx - rOuter);
                line.setAttribute('y1', cy + rOuter);
                line.setAttribute('x2', cx + rOuter);
                line.setAttribute('y2', cy - rOuter);
                line.setAttribute('stroke', '#374151');
                line.setAttribute('stroke-width', '1.2');
                line.setAttribute('stroke-dasharray', '4 3');
                svg.appendChild(line);

                const centerText = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                centerText.setAttribute('x', cx);
                centerText.setAttribute('y', cy - 12);
                centerText.setAttribute('text-anchor', 'middle');
                centerText.setAttribute('class', 'wc-label');
                centerText.textContent = 'COLD';
                svg.appendChild(centerText);

                const centerText2 = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                centerText2.setAttribute('x', cx);
                centerText2.setAttribute('y', cy + 12);
                centerText2.setAttribute('text-anchor', 'middle');
                centerText2.setAttribute('class', 'wc-label');
                centerText2.textContent = 'WARM';
                svg.appendChild(centerText2);

                svg.addEventListener('click', e => {
                    const slice = e.target.closest('.wc-slice');
                    if (!slice) return;
                    $$('.wc-slice').forEach(p => p.classList.remove('active'));
                    slice.classList.add('active');

                    const data = warmCoolData.find(x => x.id === slice.dataset.id);
                    if (!data) return;

                    const tipe = data.type === 'cold' ? 'Warna DINGIN (cold)' : 'Warna HANGAT (warm)';
                    warmInfo.innerHTML = `
                    <p class="mb-1"><strong>${data.label}</strong> – ${tipe}</p>
                    <p class="mb-0">${data.desc}</p>
                `;

                    appState.warmCoolSelectedId = data.id;
                    appState.warmCoolInfoHTML = warmInfo.innerHTML;
                    saveState();
                });
            }

            /* ===== Latihan 1: warm/cool ===== */
            $$('.btn-q-warmcool').forEach(btn => {
                btn.addEventListener('click', () => {
                    const ans = btn.dataset.answer;
                    if (ans === 'cold') {
                        fbWC.innerHTML =
                            '<span class="text-success">✅ Benar, tampilan ash blonde menggunakan dominasi warna dingin.</span>';
                    } else {
                        fbWC.innerHTML =
                            '<span class="text-danger">❌ Kurang tepat, untuk ash blonde digunakan warna dingin (cold).</span>';
                    }
                    appState.warmCoolQuizFeedback = fbWC.innerHTML;
                    saveState();
                });
            });

            const btnResetWarmCool = $('#btnResetWarmCool');
            if (btnResetWarmCool) {
                btnResetWarmCool.addEventListener('click', () => {
                    fbWC.innerHTML = '';
                    if (warmInfo) warmInfo.innerHTML = defaultWarmInfo;
                    $$('.wc-slice').forEach(p => p.classList.remove('active'));

                    appState.warmCoolSelectedId = null;
                    appState.warmCoolInfoHTML = '';
                    appState.warmCoolQuizFeedback = '';
                    saveState();
                });
            }

            /* ===== Latihan checklist warna dingin ===== */
            const btnCheckCold = $('#btnCheckCold');
            const btnResetCold = $('#btnResetCold');
            const fbCold = $('#fbColdChecklist');

            if (btnCheckCold && fbCold) {
                btnCheckCold.addEventListener('click', () => {
                    const checked = Array
                        .from(document.querySelectorAll('#warmCoolChecklist input[type="checkbox"]:checked'))
                        .map(el => el.value);

                    if (!checked.length) {
                        fbCold.innerHTML =
                            '<span class="text-danger">Belum ada yang dicentang. Coba pilih dulu mana saja warna yang menurutmu dingin.</span>';
                        appState.warmCoolChecklist = [];
                        appState.fbColdHTML = fbCold.innerHTML;
                        saveState();
                        return;
                    }

                    const coldSet = ['Blue', 'Violet', 'Green'];
                    const benar = checked.filter(v => coldSet.includes(v)).length;
                    const salah = checked.filter(v => !coldSet.includes(v)).length;

                    if (benar === coldSet.length && salah === 0) {
                        fbCold.innerHTML =
                            '<span class="text-success">✅ Tepat! Blue, Violet, dan Green adalah warna dingin.</span>';
                    } else {
                        fbCold.innerHTML =
                            `<span class="text-warning">Sebagian sudah benar (${benar} warna dingin), tapi masih ada yang keliru atau kurang. Warna dingin yang tepat adalah: <strong>${coldSet.join(', ')}</strong>.</span>`;
                    }

                    appState.warmCoolChecklist = checked;
                    appState.fbColdHTML = fbCold.innerHTML;
                    saveState();
                });
            }

            if (btnResetCold && fbCold) {
                btnResetCold.addEventListener('click', () => {
                    document
                        .querySelectorAll('#warmCoolChecklist input[type="checkbox"]')
                        .forEach(el => el.checked = false);
                    fbCold.innerHTML = '';

                    appState.warmCoolChecklist = [];
                    appState.fbColdHTML = '';
                    saveState();
                });
            }

            /* ==================== CORRECTIVE CHART ==================== */
            const rows = $$('#tblCorrective .click-row');
            const info = $('#ccInfo');
            const defaultCCInfo = 'Klik salah satu baris tabel untuk melihat penjelasan koreksi warnanya.';

            const explanations = {
                'Lightest Yellow': 'Lightest Yellow muncul pada level pirang paling terang. Lightest Violet dipakai agar hasil tidak tampak kuning pucat.',
                'Light Yellow': 'Light Yellow sering muncul setelah bleaching ringan. Light Violet menurunkannya menjadi pirang yang lebih netral.',
                'Yellow': 'Yellow termasuk undertone hangat yang sering muncul setelah proses bleaching. Violet digunakan untuk menetralkannya.',
                'Yellow Orange': 'Yellow Orange menandakan rona kuning-oranye; Violet Blue membantu mendinginkan tanpa membuat terlalu abu.',
                'Orange': 'Orange muncul pada level pirang gelap. Koreksinya memakai Blue agar hasil akhir lebih netral/ash.',
                'Orange Red': 'Orange Red sering terlihat pada cokelat kemerahan terang. Blue Green digunakan untuk mengimbangi merah-oranye tersebut.',
                'Red Orange': 'Red Orange adalah perpaduan merah dan oranye; Green Blue dipakai untuk menetralkan.',
                'Red': 'Red dan variasinya sering muncul pada warna cokelat kemerahan. Green dipakai untuk mengurangi kesan merah.',
                'Dark Red': 'Dark Red tampak pada level gelap. Dipadukan dengan Dark Green untuk menurunkan kehangatan tanpa membuat terlalu kusam.',
                'Darkest Red': 'Darkest Red sangat pekat dan hangat; Darkest Green digunakan untuk koreksi pada level sangat gelap hingga hitam.'
            };

            const caseText = $('#caseText');
            const fbCase = $('#fbCaseRow');
            const btnNewCase = $('#btnNewCase');
            const btnResetCase = $('#btnResetCase');
            const btnResetAllChart = $('#btnResetAllChart');

            const quizUnder = $('#quizUnder');
            const quizCorrect = $('#quizCorrect');
            const btnCheck = $('#btnCheckChart');
            const btnResetChart = $('#btnResetChart');
            const fb = $('#fbChart');

            const key = {
                'Light Yellow': 'Light Violet',
                'Yellow': 'Violet',
                'Orange': 'Blue',
                'Red': 'Green',
                'Dark Red': 'Dark Green'
            };

            const cases = [
                {
                    text: 'Klien memiliki rambut level 6 dengan rona oranye yang kuat.',
                    undertone: 'Orange',
                    levelPrefix: '6'
                },
                {
                    text: 'Rambut pirang sangat terang (level 9) masih tampak light yellow setelah bleaching.',
                    undertone: 'Light Yellow',
                    levelPrefix: '9'
                },
                {
                    text: 'Seorang klien dengan rambut level 3 terlihat terlalu merah.',
                    undertone: 'Red',
                    levelPrefix: '3'
                },
                {
                    text: 'Rambut level 7 menunjukkan yellow orange yang cukup jelas.',
                    undertone: 'Yellow Orange',
                    levelPrefix: '7'
                },
                {
                    text: 'Klien dengan rambut level 2 mengeluhkan rona dark red yang berlebihan.',
                    undertone: 'Dark Red',
                    levelPrefix: '2'
                }
            ];

            let currentCase = null;

            /* ===== Klik baris tabel ===== */
            if (rows.length && info) {
                rows.forEach(row => {
                    row.addEventListener('click', () => {
                        rows.forEach(r => r.classList.remove('selected-row'));
                        row.classList.add('selected-row');

                        const u = row.dataset.under;
                        const c = row.dataset.correct;
                        const lvl = row.dataset.level;

                        const extra = explanations[u] ||
                            'Gunakan corrective tone yang berseberangan pada lingkaran warna agar hasilnya lebih netral.';

                        info.innerHTML = `
                        <p><strong>Undertone:</strong> ${u}</p>
                        <p><strong>Corrective tone:</strong> ${c}</p>
                        <p><strong>Level rambut:</strong> ${lvl}</p>
                        <p class="small-muted mb-0">${extra}</p>
                    `;

                        const ansU = $('#caseAnswerUnder');
                        const ansL = $('#caseAnswerLevel');
                        if (ansU) ansU.value = u;
                        if (ansL) ansL.value = lvl;

                        if (currentCase && fbCase) {
                            const benar =
                                u === currentCase.undertone &&
                                lvl.trim().startsWith(currentCase.levelPrefix);

                            if (benar) {
                                fbCase.innerHTML =
                                    '<span class="text-success">✅ Bagus! Kamu memilih baris yang sesuai dengan kasus tersebut.</span>';
                            } else {
                                fbCase.innerHTML =
                                    '<span class="text-warning">⚠️ Belum tepat. Coba perhatikan kembali undertone dan level yang disebutkan di kasus.</span>';
                            }
                        }

                        appState.correctiveSelectedUnder = u;
                        appState.ccInfoHTML = info.innerHTML;
                        appState.caseAnswerUnder = ansU ? ansU.value : '';
                        appState.caseAnswerLevel = ansL ? ansL.value : '';
                        appState.fbCaseRowHTML = fbCase ? fbCase.innerHTML : '';
                        saveState();
                    });
                });
            }

            /* ===== Tantangan 1: dropdown ===== */
            if (btnCheck && fb) {
                btnCheck.addEventListener('click', () => {
                    const u = quizUnder.value;
                    const c = quizCorrect.value;

                    if (!u || !c) {
                        fb.innerHTML = `<span class="text-danger">Pilih dulu undertone dan corrective tone-nya.</span>`;
                        appState.quizUnder = u;
                        appState.quizCorrect = c;
                        appState.fbChartHTML = fb.innerHTML;
                        saveState();
                        return;
                    }

                    if (key[u] === c) {
                        fb.innerHTML = `<div class="alert alert-success mb-0">
                        ✅ Tepat! Untuk <strong>${u}</strong> digunakan <strong>${c}</strong> sebagai corrective tone.
                    </div>`;
                    } else {
                        fb.innerHTML = `<div class="alert alert-warning mb-0">
                        ⚠️ Belum tepat. Menurut chart, <strong>${u}</strong> dikoreksi dengan
                        <strong>${key[u]}</strong>, bukan <strong>${c}</strong>.
                    </div>`;
                    }

                    appState.quizUnder = u;
                    appState.quizCorrect = c;
                    appState.fbChartHTML = fb.innerHTML;
                    saveState();
                });
            }

            if (btnResetChart && fb) {
                btnResetChart.addEventListener('click', () => {
                    if (quizUnder) quizUnder.value = '';
                    if (quizCorrect) quizCorrect.value = '';
                    fb.innerHTML = '';

                    appState.quizUnder = '';
                    appState.quizCorrect = '';
                    appState.fbChartHTML = '';
                    saveState();
                });
            }

            /* ===== Tantangan 2: kasus ===== */
            if (btnNewCase && caseText && fbCase) {
                btnNewCase.addEventListener('click', () => {
                    const idx = Math.floor(Math.random() * cases.length);
                    currentCase = cases[idx];
                    appState.currentCaseIndex = idx;

                    caseText.innerHTML = `<span class="fw-semibold">Kasus:</span> ${currentCase.text}`;
                    fbCase.innerHTML = '<span class="small-muted">Sekarang klik baris pada tabel yang menurutmu paling tepat.</span>';
                    rows.forEach(r => r.classList.remove('selected-row'));

                    const ansU = $('#caseAnswerUnder');
                    const ansL = $('#caseAnswerLevel');
                    if (ansU) ansU.value = '';
                    if (ansL) ansL.value = '';

                    appState.caseTextHTML = caseText.innerHTML;
                    appState.caseAnswerUnder = '';
                    appState.caseAnswerLevel = '';
                    appState.fbCaseRowHTML = fbCase.innerHTML;
                    saveState();
                });
            }

            if (btnResetCase && caseText && fbCase) {
                btnResetCase.addEventListener('click', () => {
                    currentCase = null;
                    appState.currentCaseIndex = null;

                    caseText.innerHTML =
                        'Klik <em>Kasus Baru</em>, kemudian pilih satu baris pada tabel sebagai jawabanmu.';
                    fbCase.innerHTML = '';
                    rows.forEach(r => r.classList.remove('selected-row'));

                    const ansU = $('#caseAnswerUnder');
                    const ansL = $('#caseAnswerLevel');
                    if (ansU) ansU.value = '';
                    if (ansL) ansL.value = '';

                    appState.caseTextHTML = caseText.innerHTML;
                    appState.caseAnswerUnder = '';
                    appState.caseAnswerLevel = '';
                    appState.fbCaseRowHTML = '';
                    appState.correctiveSelectedUnder = null;
                    appState.ccInfoHTML = '';
                    saveState();

                    if (info) info.innerHTML = defaultCCInfo;
                });
            }

            /* ===== Reset semua interaktif tabel ===== */
            if (btnResetAllChart) {
                btnResetAllChart.addEventListener('click', () => {
                    appState = { ...defaultState };
                    saveState();

                    // bersihkan tampilan
                    if (info) info.innerHTML = defaultCCInfo;
                    rows.forEach(r => r.classList.remove('selected-row'));

                    if (quizUnder) quizUnder.value = '';
                    if (quizCorrect) quizCorrect.value = '';
                    if (fb) fb.innerHTML = '';

                    if (caseText) {
                        caseText.innerHTML =
                            'Klik <em>Kasus Baru</em>, kemudian pilih satu baris pada tabel sebagai jawabanmu.';
                    }
                    if (fbCase) fbCase.innerHTML = '';

                    const ansU = $('#caseAnswerUnder');
                    const ansL = $('#caseAnswerLevel');
                    if (ansU) ansU.value = '';
                    if (ansL) ansL.value = '';
                });
            }

            /* ==================== APPLY STATE SAAT LOAD ==================== */
            function applyStateToUI() {
                // wheel
                if (warmInfo) {
                    warmInfo.innerHTML = appState.warmCoolInfoHTML || defaultWarmInfo;
                }
                if (appState.warmCoolSelectedId && svg) {
                    const slice = svg.querySelector(`.wc-slice[data-id="${appState.warmCoolSelectedId}"]`);
                    if (slice) slice.classList.add('active');
                }
                if (fbWC && appState.warmCoolQuizFeedback) {
                    fbWC.innerHTML = appState.warmCoolQuizFeedback;
                }
                // checklist
                if (appState.warmCoolChecklist && appState.warmCoolChecklist.length) {
                    appState.warmCoolChecklist.forEach(v => {
                        const cb = document.querySelector(`#warmCoolChecklist input[value="${v}"]`);
                        if (cb) cb.checked = true;
                    });
                }
                if (fbCold && appState.fbColdHTML) {
                    fbCold.innerHTML = appState.fbColdHTML;
                }

                // corrective
                if (info) {
                    info.innerHTML = appState.ccInfoHTML || defaultCCInfo;
                }
                if (appState.correctiveSelectedUnder) {
                    const row = rows.find(r => r.dataset.under === appState.correctiveSelectedUnder);
                    if (row) row.classList.add('selected-row');
                }

                if (quizUnder) quizUnder.value = appState.quizUnder || '';
                if (quizCorrect) quizCorrect.value = appState.quizCorrect || '';
                if (fb && appState.fbChartHTML) fb.innerHTML = appState.fbChartHTML;

                // kasus
                if (typeof appState.currentCaseIndex === 'number' &&
                    appState.currentCaseIndex >= 0 &&
                    appState.currentCaseIndex < cases.length) {
                    currentCase = cases[appState.currentCaseIndex];
                    if (caseText) {
                        caseText.innerHTML = appState.caseTextHTML ||
                            `<span class="fw-semibold">Kasus:</span> ${currentCase.text}`;
                    }
                } else {
                    currentCase = null;
                }

                const ansU = $('#caseAnswerUnder');
                const ansL = $('#caseAnswerLevel');
                if (ansU) ansU.value = appState.caseAnswerUnder || '';
                if (ansL) ansL.value = appState.caseAnswerLevel || '';
                if (fbCase && appState.fbCaseRowHTML) {
                    fbCase.innerHTML = appState.fbCaseRowHTML;
                }
            }

            // load dari localStorage lalu terapkan ke UI
            loadStateFromStorage();
            applyStateToUI();

        })();
    </script>

</body>

</html>