<!doctype html>
<html lang="id">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Analisis Interaktif â€¢ Pengetahuan Dasar Pewarnaan Rambut</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />
    <style>
        :root {
            --navbar-h: 64px;
            --footer-h: 48px;
            --brand: #ff3f8e;
            --line: #e5e7eb;
            --radius: 12px;
        }

        html,
        body {
            height: 100%;
            background: #fff;
        }

        body {
            padding-bottom: var(--footer-h);
        }

        .main-pad {
            padding-top: var(--navbar-h);
        }

        .navbar,
        .footer {
            background: #fff;
        }

        .footer {
            border-top: 1px solid var(--line);
            height: var(--footer-h);
        }

        main.app-shell {
            height: calc(100dvh - var(--navbar-h) - var(--footer-h));
            overflow: hidden;
        }

        .menu-card {
            background: #fff;
            border-radius: var(--radius);
            border: 1px solid var(--line);
            box-shadow: 0 2px 10px rgba(0, 0, 0, .05);
        }

        .menu-title {
            padding: .75rem 1rem;
            border-bottom: 1px solid var(--line);
            font-weight: 600;
        }

        .menu-item {
            display: block;
            padding: .6rem 1rem;
            color: inherit;
            text-decoration: none;
        }

        .menu-item:hover {
            background: #fafafa;
        }

        .menu-item.active {
            background: #f5f5f5;
            font-weight: 600;
        }

        @media(min-width:768px) {
            .sidebar-fixed {
                position: fixed;
                top: var(--navbar-h);
                left: 0;
                width: 255px;
                height: calc(100dvh - var(--navbar-h));
                overflow-y: auto;
            }

            .content-with-fixed {
                margin-left: 256px;
            }
        }

        .content-col {
            height: 100%;
            overflow: hidden;
        }

        .content-scroll {
            height: 100%;
            overflow: hidden;
        }

        .card-header {
            background: #fff;
            border-bottom: 1px solid var(--line);
        }

        .materi-card {
            height: clamp(520px, 66vh, 840px);
        }

        .materi-card .card-body {
            flex: 1 1 auto;
            min-height: 0;
            overflow: auto;
            -webkit-overflow-scrolling: touch;
        }

        .btn-brand {
            background: var(--brand);
            color: #fff;
            border: none;
        }

        .btn-brand:hover {
            filter: brightness(.95);
            color: #fff;
        }

        .badge-soft {
            background: #f3f4f6;
            color: #374151;
        }

        .shadow-soft {
            box-shadow: 0 6px 18px rgba(0, 0, 0, .08);
        }

        /* Interaktif */
        .flashcard {
            border: 1px solid var(--line);
            border-radius: 10px;
            padding: 1rem;
            cursor: pointer;
            transition: transform .15s, box-shadow .15s;
        }

        .flashcard:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 24px rgba(0, 0, 0, .08);
        }

        .drag-pool {
            display: grid;
            gap: .6rem;
        }

        .drag-chip {
            background: #fff;
            border: 1px solid #e9ecef;
            border-radius: 10px;
            padding: .5rem .75rem;
            cursor: grab;
            user-select: none;
        }

        .drop-wrap {
            display: grid;
            gap: .8rem;
        }

        .drop-col {
            min-height: 120px;
            border: 2px dashed #ced4da;
            border-radius: 12px;
            padding: .75rem;
            background: #fcfcfd;
        }

        .drop-col.drag-over {
            border-color: #0d6efd;
            background: #eef5ff;
        }

        .drop-col.empty::before {
            content: 'Seret ke siniâ€¦';
            color: #adb5bd;
            font-size: .9rem;
        }

        .drop-col.correct {
            border-color: rgba(25, 135, 84, .8);
            background: #f0fff6;
        }

        .drop-col.wrong {
            border-color: rgba(220, 53, 69, .8);
            background: #fff5f6;
        }

        .likert input[type=range] {
            width: 100%;
        }

        @media(max-width:767.98px) {
            main.app-shell {
                height: auto;
                overflow: visible;
            }

            .sidebar-fixed {
                position: static;
                width: 100%;
                height: auto;
            }

            .content-with-fixed {
                margin-left: 0;
            }

            .materi-card {
                height: auto;
            }

            .materi-card .card-body {
                overflow: visible;
            }
        }
    </style>
</head>

<body>
    <!-- NAVBAR -->
    <nav class="navbar navbar-light navbar-expand-lg fixed-top shadow-sm">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center gap-2" href="../index.html">
                <i class="bi bi-brush" style="font-size:1.25rem;color:var(--brand)"></i>
                <span><strong>Pewarnaan Rambut</strong> <span class="fw-normal" style="color:var(--brand)">â€¢ Single
                        Application</span></span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navs"
                aria-label="Buka menu"><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse" id="navs">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="../index.html">Beranda</a></li>
                    <li class="nav-item"><a class="nav-link active fw-semibold" style="color:var(--brand)"
                            href="#">Analisis</a></li>
                    <li class="nav-item"><a class="nav-link" href="../materi/apersepsi.html">Materi</a></li>
                    <li class="nav-item"><a class="nav-link" href="../latihan.html">Latihan</a></li>
                    <li class="nav-item"><a class="nav-link" href="../kd.html">Tujuan Pembelajaran</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <main class="main-pad app-shell">
        <div class="container-fluid">
            <div class="row g-2 h-100">
                <!-- Sidebar -->
                <aside class="col-12 col-md-auto p-0">
                    <nav class="menu-card sidebar-fixed shadow-sm" aria-label="Navigasi Analisis">
                        <div class="menu-title"><i class="bi bi-clipboard-data"></i> Analisis Interaktif</div>
                        <a class="menu-item active" href="#pemantik">Pertanyaan Pemantik</a>
                        <a class="menu-item" href="#peta">Peta Konsep Builder</a>
                        <a class="menu-item" href="#kata">Kata Kunci (Flashcard)</a>
                        <a class="menu-item" href="#apersepsi">Apersepsi & Refleksi</a>
                        <a class="menu-item" href="#jawab">Jawab Yuk!</a>
                    </nav>
                </aside>

                <!-- Content -->
                <section class="col-12 col-md-9 col-xl-10 content-col content-with-fixed">
                    <div class="content-scroll">
                        <div class="card materi-card shadow-sm">
                            <div class="card-header d-flex align-items-center gap-2">
                                <i class="bi bi-clipboard-data" style="color:var(--brand);font-size:1.25rem"></i>
                                <div class="d-flex flex-wrap align-items-baseline gap-2">
                                    <h3 class="h5 mb-0 fw-bold">Analisis Interaktif</h3>
                                    <span class="text-muted">â€¢ Pengetahuan Dasar Pewarnaan Rambut</span>
                                </div>
                            </div>
                            <div class="card-body">
                                <!-- 1. PEMANTIK -->
                                <section id="pemantik" class="mb-5">
                                    <h4 class="h6 text-uppercase text-muted mb-2">Pertanyaan Pemantik</h4>
                                    <div class="vstack gap-2">
                                        <div class="input-group">
                                            <span class="input-group-text">1</span>
                                            <input id="q1" class="form-control"
                                                placeholder="Kapan pewarnaan rambut mulai dikenal/ditemukan?" />
                                        </div>
                                        <div class="input-group">
                                            <span class="input-group-text">2</span>
                                            <input id="q2" class="form-control"
                                                placeholder="Dari mana praktik mengubah warna rambut berasal?" />
                                        </div>
                                        <div class="input-group">
                                            <span class="input-group-text">3</span>
                                            <textarea id="q3" class="form-control" rows="2"
                                                placeholder="Bagaimana proses panjang pewarnaan tersebut dimulai?"></textarea>
                                        </div>
                                        <div class="d-flex gap-2">
                                            <button class="btn btn-brand" id="savePemantik"><i class="bi bi-save2"></i>
                                                Simpan</button>
                                            <button class="btn btn-outline-secondary" id="clearPemantik">Reset</button>
                                        </div>
                                        <div id="pemantikFeedback"></div>
                                    </div>
                                </section>

                                <hr />

                                <!-- 2. Peta Konsep Builder (Drag) -->
                                <section id="peta" class="mb-5">
                                    <h4 class="h6 text-uppercase text-muted mb-2">Peta Konsep Builder</h4>
                                    <p class="small text-muted">Seret tiga subkonsep ke kolom "Turunan" dari konsep
                                        utama.</p>
                                    <div class="row g-3">
                                        <div class="col-lg-5">
                                            <div class="p-3 rounded border" style="border-color:var(--line)">
                                                <div class="mb-2 fw-semibold">Konsep Utama</div>
                                                <div class="border rounded p-3 text-center">Pengetahuan Dasar Pewarnaan
                                                </div>
                                                <div class="mt-3 small text-muted">Turunan yang benar: Pewarnaan Rambut
                                                    â€¢ Teori Warna â€¢ Pewarnaan Korektif</div>
                                            </div>
                                        </div>
                                        <div class="col-lg-7">
                                            <div class="row g-3">
                                                <div class="col-md-6">
                                                    <div class="drop-wrap">
                                                        <div>
                                                            <div class="small text-muted mb-1">Turunan</div>
                                                            <div id="drop-branch" class="drop-col empty"
                                                                data-accept="A,B,C"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="drag-pool" id="pool">
                                                        <div class="drag-chip" draggable="true" data-key="A">Pewarnaan
                                                            Rambut</div>
                                                        <div class="drag-chip" draggable="true" data-key="B">Teori Warna
                                                        </div>
                                                        <div class="drag-chip" draggable="true" data-key="C">Pewarnaan
                                                            Korektif</div>
                                                        <div class="drag-chip" draggable="true" data-key="X">Biokimia
                                                        </div>
                                                        <div class="drag-chip" draggable="true" data-key="Y">Perawatan
                                                            Wajah</div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="d-flex gap-2 mt-3">
                                                <button class="btn btn-brand" id="cekPeta">Periksa</button>
                                                <button class="btn btn-outline-secondary" id="resetPeta">Reset</button>
                                            </div>
                                            <div id="petaFeedback" class="mt-2"></div>
                                        </div>
                                    </div>
                                </section>

                                <hr />

                                <!-- 3. Kata Kunci (Flashcards) -->
                                <section id="kata" class="mb-5">
                                    <h4 class="h6 text-uppercase text-muted mb-2">Kata Kunci</h4>
                                    <div class="row g-3">
                                        <div class="col-sm-6 col-lg-4">
                                            <div class="flashcard" data-term="Dasar pewarnaan"
                                                data-def="Prinsip umum proses mengubah warna rambut secara aman & terkontrol.">
                                                <div class="fw-semibold">Dasar pewarnaan</div>
                                                <div class="text-muted small mt-1">Ketuk untuk lihat penjelasan</div>
                                            </div>
                                        </div>
                                        <div class="col-sm-6 col-lg-4">
                                            <div class="flashcard" data-term="Biokimia"
                                                data-def="Ilmu reaksi kimia pada rambut/kulit kepala saat pewarnaan.">
                                                <div class="fw-semibold">Biokimia</div>
                                                <div class="text-muted small mt-1">Ketuk untuk lihat penjelasan</div>
                                            </div>
                                        </div>
                                        <div class="col-sm-6 col-lg-4">
                                            <div class="flashcard" data-term="Teori warna"
                                                data-def="Relasi warna (hangatâ€“dingin, komplementer) untuk menetralkan/menonjolkan nada.">
                                                <div class="fw-semibold">Teori warna</div>
                                                <div class="text-muted small mt-1">Ketuk untuk lihat penjelasan</div>
                                            </div>
                                        </div>
                                        <div class="col-sm-6 col-lg-4">
                                            <div class="flashcard" data-term="Rambut"
                                                data-def="Serat keratin dari folikel; struktur kutikulaâ€“korteksâ€“medula memengaruhi hasil warna.">
                                                <div class="fw-semibold">Rambut</div>
                                                <div class="text-muted small mt-1">Ketuk untuk lihat penjelasan</div>
                                            </div>
                                        </div>
                                        <div class="col-sm-6 col-lg-4">
                                            <div class="flashcard" data-term="Pewarnaan korektif"
                                                data-def="Teknik memperbaiki warna yang salah/berubah (misal terlalu hangat atau tidak rata).">
                                                <div class="fw-semibold">Pewarnaan korektif</div>
                                                <div class="text-muted small mt-1">Ketuk untuk lihat penjelasan</div>
                                            </div>
                                        </div>
                                    </div>
                                </section>

                                <hr />

                                <!-- 4. Apersepsi & Skala Likert -->
                                <section id="apersepsi" class="mb-5">
                                    <h4 class="h6 text-uppercase text-muted mb-2">Apersepsi</h4>
                                    <p>Pernahkah melihat warna rambut yang sangat bagus di sekitar kalian? Tulis contoh
                                        dan alasan kenapa menarik.</p>
                                    <textarea id="aperTxt" class="form-control" rows="3"
                                        placeholder="Tulis pengamatanmu..."></textarea>
                                    <div class="likert mt-2">
                                        <label class="form-label small text-muted">Seberapa percaya diri kamu memahami
                                            konsep dasar (0 = belum paham, 5 = sangat paham)</label>
                                        <input id="aperScale" type="range" min="0" max="5" step="1" value="0" />
                                    </div>
                                    <div class="d-flex gap-2 mt-2">
                                        <button class="btn btn-brand" id="saveAper">Simpan</button>
                                        <button class="btn btn-outline-secondary" id="clearAper">Hapus</button>
                                    </div>
                                    <div id="aperFeedback" class="mt-2"></div>
                                </section>

                                <hr />

                                <!-- 5. Jawab Yuk! (Short Answers) -->
                                <section id="jawab" class="mb-2">
                                    <h4 class="h6 text-uppercase text-muted mb-2">Jawab Yuk!</h4>
                                    <div class="vstack gap-2">
                                        <textarea id="jy1" class="form-control" rows="2"
                                            placeholder="1) Kapan kalian jenis pewarna rambut tradisional mulai digunakan? Contoh bahan dari tumbuhan."></textarea>
                                        <textarea id="jy2" class="form-control" rows="2"
                                            placeholder="2) Ceritakan pengalaman kalian ketika melihat seseorang sedang melakukan pewarnaan di salon/rumah."></textarea>
                                        <textarea id="jy3" class="form-control" rows="2"
                                            placeholder="3) Menurut kalian, warna rambut apa yang sedang digemari oleh anak muda? Beri alasan."></textarea>
                                        <textarea id="jy4" class="form-control" rows="2"
                                            placeholder="4) Pendapatmu tentang kosmetik pewarna rambut yang dijual bebas untuk digunakan di rumah."></textarea>
                                        <textarea id="jy5" class="form-control" rows="2"
                                            placeholder="5) Seberapa perlu dan penting seseorang mewarnai rambut mereka?"></textarea>
                                        <div class="d-flex gap-2 mt-2">
                                            <button class="btn btn-brand" id="saveJawab">Simpan Semua</button>
                                            <button class="btn btn-outline-secondary" id="clearJawab">Kosongkan</button>
                                        </div>
                                        <div id="jawabFeedback"></div>
                                    </div>
                                </section>

                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </main>

    <footer class="footer fixed-bottom py-2">
        <div class="container d-flex justify-content-between align-items-center small" style="height:100%">
            <span>SMKS ISFI BANJARMASIN â€¢ Hair Coloring</span>
            <span class="text-muted">Â© 2025 â€¢ Single Application</span>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // ===== Helpers (storage) =====
        const SKEY = 'analisis-rambut-v1';
        const getData = () => JSON.parse(localStorage.getItem(SKEY) || '{}');
        const setData = (obj) => localStorage.setItem(SKEY, JSON.stringify(obj));

        // ====== Validation helpers ======
        const byId = (id) => document.getElementById(id);
        const showMsg = (el, html) => el.innerHTML = html;
        const warn = (msg) => `<div class=\"alert alert-warning mb-0\">${msg}</div>`;
        const ok = (msg) => `<div class=\"alert alert-success mb-0\">${msg}</div>`;

        function isEmpty(v) { return !v || v.trim().length === 0; }
        function markInvalid(el) { el.classList.add('is-invalid'); el.addEventListener('input', () => el.classList.remove('is-invalid'), { once: true }); }
        function requireFilled(fields) {
            // fields: [{el, min}]
            let valid = true;
            for (const f of fields) {
                const val = f.el.value || '';
                const min = f.min || 1;
                if (val.trim().length < min) { valid = false; markInvalid(f.el); }
            }
            return valid;
        }

        // ===== Pemantik =====
        const q1 = byId('q1'); const q2 = byId('q2'); const q3 = byId('q3');
        const pemantikFeedback = byId('pemantikFeedback');
        byId('savePemantik').addEventListener('click', () => {
            const okFilled = requireFilled([{ el: q1 }, { el: q2 }, { el: q3, min: 5 }]);
            if (!okFilled) { showMsg(pemantikFeedback, warn('Lengkapi semua kolom pemantik sebelum menyimpan.')); return; }
            const data = getData();
            data.pemantik = { q1: q1.value.trim(), q2: q2.value.trim(), q3: q3.value.trim(), at: Date.now() };
            setData(data);
            showMsg(pemantikFeedback, ok('Tersimpan. âœ…'));
        });
        byId('clearPemantik').addEventListener('click', () => {
            const data = getData(); delete data.pemantik; setData(data);
            q1.value = q2.value = ''; q3.value = ''; showMsg(pemantikFeedback, '');
        });

        // ===== Drag & Drop Peta =====
        const drop = byId('drop-branch');
        const pool = byId('pool');
        let dragRef = null;
        document.addEventListener('dragstart', e => { if (e.target.classList.contains('drag-chip')) { dragRef = e.target; e.dataTransfer.setData('text/plain', e.target.dataset.key); } });
        ['dragenter', 'dragover'].forEach(evt => document.addEventListener(evt, e => { if (e.target.classList.contains('drop-col')) { e.preventDefault(); e.target.classList.add('drag-over'); } }));
        ['dragleave', 'drop'].forEach(evt => document.addEventListener(evt, e => { if (e.target.classList.contains('drop-col')) e.target.classList.remove('drag-over'); }));
        document.addEventListener('drop', e => { if (!e.target.classList.contains('drop-col')) return; e.preventDefault(); if (!dragRef) return; e.target.appendChild(dragRef); setEmptyState(e.target); petaFeedback.innerHTML = ''; });
        const setEmptyState = (zone) => zone.classList.toggle('empty', !zone.querySelector('.drag-chip'));
        const petaFeedback = byId('petaFeedback');

        byId('cekPeta').addEventListener('click', () => {
            const chips = Array.from(drop.querySelectorAll('.drag-chip')).map(c => c.dataset.key);
            const expect = ['A', 'B', 'C'];
            const correctLength = chips.length === 3;
            if (!correctLength) { drop.classList.remove('correct'); drop.classList.add('wrong'); showMsg(petaFeedback, warn('Masukkan tepat tiga turunan ke kolom.')); return; }
            const correct = chips.every(k => expect.includes(k));
            drop.classList.remove('correct', 'wrong'); drop.classList.add(correct ? 'correct' : 'wrong');
            showMsg(petaFeedback, correct ? ok('Benar! Struktur peta sesuai. ðŸŽ‰') : warn('Masih keliru. Pastikan hanya turunan yang benar.'));
            const data = getData(); data.peta = chips; setData(data);
        });
        byId('resetPeta').addEventListener('click', () => { drop.querySelectorAll('.drag-chip').forEach(ch => pool.appendChild(ch)); setEmptyState(drop); showMsg(petaFeedback, ''); const data = getData(); delete data.peta; setData(data); });

        // ===== Flashcards =====
        document.querySelectorAll('.flashcard').forEach(card => {
            card.addEventListener('click', () => {
                const term = card.dataset.term; const def = card.dataset.def;
                const showing = card.querySelector('p');
                if (showing) { showing.remove(); return; }
                const p = document.createElement('p'); p.className = 'mt-2 mb-0 text-secondary'; p.textContent = def; card.appendChild(p);
                const data = getData(); data.flash = { ...(data.flash || {}), [term]: true }; setData(data);
            });
        });

        // ===== Apersepsi (Likert) =====
        const aperTxt = byId('aperTxt'); const aperScale = byId('aperScale'); const aperFeedback = byId('aperFeedback');
        byId('saveAper').addEventListener('click', () => {
            if (isEmpty(aperTxt.value)) { markInvalid(aperTxt); showMsg(aperFeedback, warn('Tuliskan refleksi singkatmu terlebih dahulu.')); return; }
            const data = getData(); data.aper = { txt: aperTxt.value.trim(), scale: aperScale.value, at: Date.now() }; setData(data);
            showMsg(aperFeedback, ok('Apersepsi tersimpan. ðŸ™Œ'));
        });
        byId('clearAper').addEventListener('click', () => { const data = getData(); delete data.aper; setData(data); aperTxt.value = ''; aperScale.value = 0; showMsg(aperFeedback, ''); });

        // ===== Jawab Yuk =====
        const jy1 = byId('jy1'), jy2 = byId('jy2'), jy3 = byId('jy3'), jy4 = byId('jy4'), jy5 = byId('jy5');
        const jawabFeedback = byId('jawabFeedback');
        byId('saveJawab').addEventListener('click', () => {
            const valid = requireFilled([{ el: jy1, min: 5 }, { el: jy2, min: 5 }, { el: jy3, min: 3 }, { el: jy4, min: 5 }, { el: jy5, min: 3 }]);
            if (!valid) { showMsg(jawabFeedback, warn('Isi semua jawaban terlebih dahulu (minimal beberapa kata).')); return; }
            const data = getData(); data.jawab = { jy1: jy1.value.trim(), jy2: jy2.value.trim(), jy3: jy3.value.trim(), jy4: jy4.value.trim(), jy5: jy5.value.trim(), at: Date.now() }; setData(data);
            showMsg(jawabFeedback, ok('Semua jawaban tersimpan. âœ…'));
        });
        byId('clearJawab').addEventListener('click', () => { const data = getData(); delete data.jawab; setData(data);[jy1, jy2, jy3, jy4, jy5].forEach(t => { t.value = ''; t.classList.remove('is-invalid'); }); showMsg(jawabFeedback, ''); });

        // ===== Restore on load =====
        window.addEventListener('DOMContentLoaded', () => {
            const data = getData();
            if (data.pemantik) { q1.value = data.pemantik.q1 || ''; q2.value = data.pemantik.q2 || ''; q3.value = data.pemantik.q3 || ''; }
            if (data.peta) { data.peta.forEach(k => { const chip = [...pool.children].find(c => c.dataset.key === k); if (chip) drop.appendChild(chip); }); setEmptyState(drop); }
            if (data.aper) { aperTxt.value = data.aper.txt || ''; aperScale.value = data.aper.scale || 0; }
            if (data.jawab) { jy1.value = data.jawab.jy1 || ''; jy2.value = data.jawab.jy2 || ''; jy3.value = data.jawab.jy3 || ''; jy4.value = data.jawab.jy4 || ''; jy5.value = data.jawab.jy5 || ''; }
        });
    </script>
</body>

</html>